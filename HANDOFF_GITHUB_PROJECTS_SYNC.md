# HANDOFF: GitHub Projects State Sync

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ GitHub (–ø–æ—Å–ª–µ logout –∏–ª–∏ –Ω–æ–≤–æ–π —Å–µ—Å—Å–∏–∏) –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –∑–∞–Ω–æ–≤–æ –≤—ã–±–∏—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç—ã –≤ –º–æ–¥–∞–ª–∫–µ, —Ö–æ—Ç—è –æ–Ω–∏ —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ `projects.json`.

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ**: Modal –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —É–∂–µ –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã –∫–∞–∫ selected/disabled –∏ –Ω–µ —Ç—Ä–µ–±–æ–≤–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞.

---

## –¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –ø—Ä–∞–≤–¥—ã

1. **`data/projects.json`** ‚Äî –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
2. **`req.session.githubToken`** ‚Äî –≤—Ä–µ–º–µ–Ω–Ω—ã–π OAuth —Ç–æ–∫–µ–Ω (—Ç–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ logout)
3. **UI State** ‚Äî –≤–∏–∑—É–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –∏ –º–æ–¥–∞–ª–∫–∏

### –ü—Ä–æ–±–ª–µ–º–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏

```
[projects.json]     ‚Üê Persistent, –∑–Ω–∞–µ—Ç —á—Ç–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–æ
       ‚Üì
[GitHub Modal]      ‚Üê –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –Ω–µ —á–∏—Ç–∞–µ—Ç projects.json
       ‚Üì
[Connect Button]    ‚Üê –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ OAuth —Å—Ç–∞—Ç—É—Å, –Ω–µ —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–æ–≤
```

---

## –ó–∞–¥–∞—á–∏

### 1. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å Modal —Å projects.json

**–§–∞–π–ª—ã**: `hub/app.js` ‚Üí `showReposModal()`, `loadGitHubRepos()`

- –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ –∏–∑ `/api/github/repos` ‚Äî —Å—Ä–∞–≤–Ω–∏—Ç—å —Å —Ç–µ–∫—É—â–∏–º `projects.json`
- –£–∂–µ –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–∞–∫ `‚úì Connected` (disabled checkbox)
- –ù–æ–≤—ã–µ –ø—Ä–æ–µ–∫—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–∞–∫ selectable

### 2. –û–±–Ω–æ–≤–∏—Ç—å API `/api/github/repos`

**–§–∞–π–ª**: `hub/server.js` ‚Üí line 531

- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `alreadyConnected: boolean` –∫ –∫–∞–∂–¥–æ–º—É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é
- –ß–∏—Ç–∞—Ç—å `projects.json` –∏ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –ø–æ `github` URL –∏–ª–∏ `name`

### 3. –ì–ª–æ–±–∞–ª—å–Ω—ã–π "—É–≥–æ–ª–æ—á–µ–∫ –ø–∞–º—è—Ç–∏"

**–ö–æ–Ω—Ü–µ–ø—Ü–∏—è**: –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã –æ –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö

–í–∞—Ä–∏–∞–Ω—Ç—ã:
- **A**: –í—Å–µ–≥–¥–∞ —á–∏—Ç–∞—Ç—å –∏–∑ `projects.json` (—Ç–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥, –Ω—É–∂–µ–Ω sync)
- **B**: –î–µ—Ä–∂–∞—Ç—å –≤ –ø–∞–º—è—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞ Map/Set –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
- **C**: –î–æ–±–∞–≤–∏—Ç—å endpoint `/api/projects/connected` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

---

## –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –§—É–Ω–∫—Ü–∏—è |
|------|---------|
| [`hub/server.js`](file:///Users/admin/projects/bip-buddy/hub/server.js) | `/api/github/repos` endpoint (line 531) |
| [`hub/app.js`](file:///Users/admin/projects/bip-buddy/hub/app.js) | `loadGitHubRepos()`, Modal rendering |
| [`hub/github-api.js`](file:///Users/admin/projects/bip-buddy/hub/github-api.js) | `matchLocalRepos()`, `addProjectsToConfig()` |
| [`data/projects.json`](file:///Users/admin/projects/bip-buddy/data/projects.json) | Persistent storage |

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
cd /Users/admin/projects/bip-buddy
node hub/server.js
# –û—Ç–∫—Ä—ã—Ç—å http://localhost:3000
# –ù–∞–∂–∞—Ç—å "üêô Connect GitHub" ‚Üí –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞–∫–∏–µ –ø—Ä–æ–µ–∫—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∏ —Å—Ä–∞–≤–Ω–∏—Ç—å —Å projects.json
```

---

## –ö–æ–Ω—Ç–µ–∫—Å—Ç

- OAuth 404 –∏—Å–ø—Ä–∞–≤–ª–µ–Ω (`.env` –ø–µ—Ä–µ–Ω–µ—Å—ë–Ω –≤ –∫–æ—Ä–µ–Ω—å)
- –°–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ `localhost:3000`
- `projects.json` —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã
